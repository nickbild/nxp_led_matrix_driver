/*
 * Nick Bild
 * NXP MIMXRT1010-EVK LED Matrix Driver
 * https://github.com/nickbild/nxp_led_matrix_driver
 *
 * Project initialized with NXP's "led_blinky" demo app code.
 */

#include "board.h"
#include "pin_mux.h"
//#include "clock_config.h"
#include "cr_section_macros.h"

/*******************************************************************************
 * Definitions
 ******************************************************************************/
#define pinR1 BOARD_USER_AD1_GPIO_PIN			// J56, 14
#define pinG1 BOARD_USER_AD2_GPIO_PIN			// J56, 16
#define pinB1 BOARD_USER_AD3_GPIO_PIN			// J57, 10
#define pinR2 BOARD_USER_AD4_GPIO_PIN			// J57, 8
#define pinG2 BOARD_USER_AD5_GPIO_PIN			// J57, 6
#define pinB2 BOARD_USER_AD6_GPIO_PIN			// J57, 12
#define pinOE BOARD_USER_AD7_GPIO_PIN			// J26, 2
#define latch BOARD_USER_AD9_GPIO_PIN			// J26, 4
#define pinClk BOARD_USER_AD10_GPIO_PIN			// J26, 6
#define selectA BOARD_USER_AD14_GPIO_PIN		// J26, 8
#define selectB BOARD_USER_2_GPIO_PIN			// J57, 20
#define selectC BOARD_USER_9_GPIO_PIN			// J56, 2
#define selectD BOARD_USER_10_GPIO_PIN			// J56, 4

#define bitRead(value, bit) (((value) >> (bit)) & 0x01)

/*******************************************************************************
 * Prototypes
 ******************************************************************************/

/*******************************************************************************
 * Variables
 ******************************************************************************/

volatile uint32_t g_systickCounter;

// Current state of matrix.
int currentRow = 0U;
int frame = 1U;  // A "frame" is defined here as one draw of all rows on the matrix.
const int totalFrames = 20U; // PWM pattern restarts after this many frames are drawn (higher == greater resolution == more colors; too high == flicker).

// Animation control.
int imgNum = 0U;
int framesElapsed = 0U;
const int changeImageFrames = 6000U;  // Set to -1 to display a single image.  Larger number == longer delay between image changes.
#define numImages 4U  // >1 means animation.

// Data to display.
//__RODATA(Flash2) TODO
__DATA(RAM3) const int brightnessR[numImages][32][32] = {
                              {
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,19,19,19,19,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,19,35,19,35,35,35,35,19,35,35,19,13,13,13,13,13},
                                {13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,19,35,35,19,35,35,35,35,19,35,35,19,13,13,13,13},
                                {13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,35,19,35,35,35,19,35,35,35,35,19,35,35,19,13,13,13},
                                {13,13,19,35,35,19,35,35,0,35,19,35,35,35,35,35,19,35,35,35,35,19,35,0,35,35,19,35,35,19,13,13},
                                {13,19,35,35,35,19,35,35,0,0,35,35,35,35,35,35,19,35,35,35,35,35,0,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,0,0,35,35,35,35,19,35,35,35,0,0,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,33,0,35,35,35,35,19,35,35,35,0,33,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,0,0,33,33,0,0,35,35,35,19,35,35,0,0,33,33,0,0,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,0,0,0,0,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,0,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,35,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,35,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,13,19,35,35,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,19,35,19,13,13},
                                {13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13},
                                {13,13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13,13},
                                {13,13,13,13,19,35,35,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,35,35,19,13,13,13,13},
                                {13,13,13,13,13,19,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,35,35,19,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,35,35,19,35,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,35,35,35,19,35,19,19,35,35,35,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,19,19,19,19,19,19,19,19,19,19,19,19,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,34,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,34,34,34,34,0,34,0,0,0,0,0,0,0,0,34,0,34,34,34,34,0,0,36,36,36,36},
                                {36,36,36,0,0,0,34,34,34,34,0,0,34,0,0,0,0,0,0,34,0,0,34,34,34,34,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,34,34,34,0,0,34,34,0,0,0,0,34,34,0,0,34,34,34,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,34,34,0,0,34,34,34,0,0,34,34,34,0,0,34,34,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,34,0,34,34,34,0,0,34,34,34,0,34,34,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,34,34,0,0,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,33,36,33,36,33,36,33,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,34,34,34,34,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,0,0,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,0,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,0,0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,0,34,0,0,0,34,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,0,34,34,0,34,0,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,0,34,34,34,34,34,34,34,34,34,0,34,0,34,34,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,0,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {34,34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,0,0,0,0,36,36,0,0,0,0,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,0,35,35,0,36,36,0,35,35,0,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,0,35,35,0,36,36,0,35,35,0,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,0,0,0,0,0,0,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,36,36,0,0,0,0,0,0,36,36,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,36,36,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,36,36,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34},
                                {34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34},
                                {34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34},
                                {34,34,34,34,36,36,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,36,36,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,36,36,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,36,36,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,36,34,34,34,34,34,34,34,34,36,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,34,36,34,34,34,34,34,34,34,34,36,34,36,36,34,34,34,34,34,34,34,34}
                              }
                           };

__DATA(RAM3) const int brightnessG[numImages][32][32] = {
                              {
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,15,8,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,9,9,15,15,8,15,15,15,9,9,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,9,9,9,9,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,9,17,9,17,17,17,17,9,17,17,9,1,1,1,1,1},
                                {1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,9,17,17,9,17,17,17,17,9,17,17,9,1,1,1,1},
                                {1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,17,9,17,17,17,9,17,17,17,17,9,17,17,9,1,1,1},
                                {1,1,9,17,17,9,17,17,0,17,9,17,17,17,17,17,9,17,17,17,17,9,17,0,17,17,9,17,17,9,1,1},
                                {1,9,17,17,17,9,17,17,0,0,17,17,17,17,17,17,9,17,17,17,17,17,0,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,0,0,17,17,17,17,9,17,17,17,0,0,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,29,0,17,17,17,17,9,17,17,17,0,29,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,0,0,29,29,0,0,17,17,17,9,17,17,0,0,29,29,0,0,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,0,0,0,0,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,0,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,17,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,17,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,1,9,17,17,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,9,17,9,1,1},
                                {1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1},
                                {1,1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1,1},
                                {1,1,1,1,9,17,17,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,17,17,9,1,1,1,1},
                                {1,1,1,1,1,9,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,17,17,9,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,17,17,9,17,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,17,17,17,9,17,9,9,17,17,17,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,33,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,33,33,33,33,0,33,0,0,0,0,0,0,0,0,33,0,33,33,33,33,0,0,36,36,36,36},
                                {36,36,36,0,0,0,33,33,33,33,0,0,33,0,0,0,0,0,0,33,0,0,33,33,33,33,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,33,33,33,0,0,33,33,0,0,0,0,33,33,0,0,33,33,33,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,33,33,0,0,33,33,33,0,0,33,33,33,0,0,33,33,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,33,0,33,33,33,0,0,33,33,33,0,33,33,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,19,19,19,19,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,0,0,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,0,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,0,0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,0,19,0,0,0,19,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,0,19,19,0,19,0,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,0,19,19,19,19,19,19,19,19,19,0,19,0,19,19,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,0,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {14,14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,0,0,0,0,36,36,0,0,0,0,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,0,0,0,0,0,0,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,36,36,0,0,0,0,0,0,36,36,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,36,36,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,36,36,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14},
                                {14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14},
                                {14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14},
                                {14,14,14,14,36,36,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,36,36,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,36,36,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,36,36,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,36,14,14,14,14,14,14,14,14,36,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,14,36,14,14,14,14,14,14,14,14,36,14,36,36,14,14,14,14,14,14,14,14}
                              }
                           };

__DATA(RAM3) const int brightnessB[numImages][32][32] = {
                              {
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,17,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,2,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,2,0,2,2,2,2,0,0,36,36,36,36},
                                {36,36,36,0,0,0,2,2,2,2,0,0,2,0,0,0,0,0,0,2,0,0,2,2,2,2,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,2,2,2,0,0,2,2,0,0,0,0,2,2,0,0,2,2,2,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,2,2,0,0,2,2,2,0,0,2,2,2,0,0,2,2,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,2,0,2,2,2,0,0,2,2,2,0,2,2,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {6,6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,0,0,0,0,36,36,0,0,0,0,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,0,0,0,0,0,0,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,36,36,0,0,0,0,0,0,36,36,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,36,36,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,36,36,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6},
                                {6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6},
                                {6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6},
                                {6,6,6,6,36,36,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,36,36,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,36,36,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,36,36,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,36,6,6,6,6,6,6,6,6,36,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,6,36,6,6,6,6,6,6,6,6,36,6,36,36,6,6,6,6,6,6,6,6}
                              }
                           };

/*******************************************************************************
 * Code
 ******************************************************************************/

//void SysTick_Handler(void)
//{
//    if (g_systickCounter != 0U)
//    {
//        g_systickCounter--;
//    }
//}
//
//void SysTick_DelayTicks(uint32_t n)
//{
//    g_systickCounter = n;
//    while (g_systickCounter != 0U)
//    {
//    }
//}

int main(void)
{
    BOARD_InitPins();

    /* Set systick reload value to generate 1ms interrupt */
//	if (SysTick_Config(SystemCoreClock / 1000U))
//	{
//		while (1)
//		{
//		}
//	}

    /* Main program loop */
    while (1)
    {
      // Send on/off bits for each LED (32 columns, R/G/B LED per column), and for top and bottom rows.
	  for (int i=0; i<32; i++){
		// Upper rows.
		if (frame <= brightnessR[imgNum][currentRow][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinR1, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinR1, 0U);
		}

		if (frame <= brightnessG[imgNum][currentRow][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinG1, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinG1, 0U);
		}

		if (frame <= brightnessB[imgNum][currentRow][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinB1, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinB1, 0U);
		}

		// Lower rows.
		if (frame <= brightnessR[imgNum][currentRow+16U][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinR2, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinR2, 0U);
		}

		if (frame <= brightnessG[imgNum][currentRow+16U][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinG2, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinG2, 0U);
		}

		if (frame <= brightnessB[imgNum][currentRow+16U][i]) {
			GPIO_PinWrite(BOARD_USER_GPIO, pinB2, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, pinB2, 0U);
		}

		// Hit clock to indicate pixel values are set.
		GPIO_PinWrite(BOARD_USER_GPIO, pinClk, 1U);
		GPIO_PinWrite(BOARD_USER_GPIO, pinClk, 0U);
	  }

	  // Turn off LEDs before turning on current row.
	  GPIO_PinWrite(BOARD_USER_GPIO, pinOE, 1U);
	  GPIO_PinWrite(BOARD_USER_GPIO, pinOE, 0U);

	  // Set current row.
	  if (bitRead(currentRow, 0) == 1U) {
		  GPIO_PinWrite(BOARD_USER_GPIO, selectA, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, selectA, 0U);
		}

	  if (bitRead(currentRow, 1) == 1U) {
		  GPIO_PinWrite(BOARD_USER_GPIO, selectB, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, selectB, 0U);
		}

	  if (bitRead(currentRow, 2) == 1U) {
		  GPIO_PinWrite(BOARD_USER_GPIO, selectC, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, selectC, 0U);
		}

	  if (bitRead(currentRow, 3) == 1U) {
		  GPIO_PinWrite(BOARD_USER_GPIO, selectD, 1U);
		} else {
			GPIO_PinWrite(BOARD_USER_GPIO, selectD, 0U);
		}

	  // All data is in.  Latch current row.
	  GPIO_PinWrite(BOARD_USER_GPIO, latch, 1U);
	  GPIO_PinWrite(BOARD_USER_GPIO, latch, 0U);

	  // Move to next row.
	  currentRow++;
	  if (currentRow == 16U) {
		currentRow = 0U;

		frame++;
		if (frame > totalFrames) {
		  frame = 1U;
		}

		framesElapsed++;
	  }

	  // Control image change speed.
	  if (framesElapsed >= changeImageFrames) {
		framesElapsed = 0U;

		imgNum++;
		if (imgNum == numImages) {
		  imgNum = 0U;
		}
	  }
    }
}
