/*
 * Nick Bild
 * NXP MIMXRT1010-EVK LED Matrix Driver
 * https://github.com/nickbild/nxp_led_matrix_driver
 *
 * Project initialized with NXP's "led_blinky" demo app code.
 */

#include "board.h"
#include "pin_mux.h"
#include "cr_section_macros.h"

/*******************************************************************************
 * Definitions
 ******************************************************************************/
#define pinR1 BOARD_USER_AD1_GPIO_PIN			// J56, 14
#define pinG1 BOARD_USER_AD2_GPIO_PIN			// J56, 16
#define pinB1 BOARD_USER_AD3_GPIO_PIN			// J57, 10
#define pinR2 BOARD_USER_AD4_GPIO_PIN			// J57, 8
#define pinG2 BOARD_USER_AD5_GPIO_PIN			// J57, 6
#define pinB2 BOARD_USER_AD6_GPIO_PIN			// J57, 12
#define pinOE BOARD_USER_AD7_GPIO_PIN			// J26, 2
#define latch BOARD_USER_AD9_GPIO_PIN			// J26, 4
#define pinClk BOARD_USER_AD10_GPIO_PIN			// J26, 6
#define selectA BOARD_USER_AD14_GPIO_PIN		// J26, 8
#define selectB BOARD_USER_2_GPIO_PIN			// J57, 20
#define selectC BOARD_USER_9_GPIO_PIN			// J56, 2
#define selectD BOARD_USER_10_GPIO_PIN			// J56, 4

#define bitRead(value, bit) (((value) >> (bit)) & 0x01)
#define QUICKACCESS_SECTION_CODE(func) __attribute__((section(".ramfunc.$SRAM_ITC"))) func

/*******************************************************************************
 * Prototypes
 ******************************************************************************/

/*******************************************************************************
 * Variables
 ******************************************************************************/

// Current state of matrix.
unsigned short int currentRow = 0;
unsigned short int currentRowBottom = 0;
unsigned short int frame = 1;  // A "frame" is defined here as one draw of all rows on the matrix.
#define totalFrames 32 // PWM pattern restarts after this many frames are drawn (higher == greater resolution == more colors; too high == flicker).

// Animation control.
unsigned short int imgNum = 0;
unsigned short int framesElapsed = 0;
#define changeImageFrames 6000  // Set to -1 to display a single image.  Larger number == longer delay between image changes.
#define numImages 3  // >1 means animation.

// Track state of pins to prevent slowdown from "switching" to
// the state the pin is already in.
unsigned short int r1_on = 0;
unsigned short int g1_on = 0;
unsigned short int b1_on = 0;
unsigned short int r2_on = 0;
unsigned short int g2_on = 0;
unsigned short int b2_on = 0;

// Data to display.
__DATA(RAM2) const unsigned short int brightnessR[numImages][32][32] = {
                              {
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,19,19,19,19,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,19,35,19,35,35,35,35,19,35,35,19,13,13,13,13,13},
                                {13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,19,35,35,19,35,35,35,35,19,35,35,19,13,13,13,13},
                                {13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,35,19,35,35,35,19,35,35,35,35,19,35,35,19,13,13,13},
                                {13,13,19,35,35,19,35,35,0,35,19,35,35,35,35,35,19,35,35,35,35,19,35,0,35,35,19,35,35,19,13,13},
                                {13,19,35,35,35,19,35,35,0,0,35,35,35,35,35,35,19,35,35,35,35,35,0,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,0,0,35,35,35,35,19,35,35,35,0,0,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,33,0,35,35,35,35,19,35,35,35,0,33,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,0,0,33,33,0,0,35,35,35,19,35,35,0,0,33,33,0,0,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,0,0,0,0,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,0,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,35,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,35,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,13,19,35,35,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,19,35,19,13,13},
                                {13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13},
                                {13,13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13,13},
                                {13,13,13,13,19,35,35,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,35,35,19,13,13,13,13},
                                {13,13,13,13,13,19,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,35,35,19,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,35,35,19,35,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,35,35,35,19,35,19,19,35,35,35,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,19,19,19,19,19,19,19,19,19,19,19,19,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,34,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,34,34,34,34,0,34,0,0,0,0,0,0,0,0,34,0,34,34,34,34,0,0,36,36,36,36},
                                {36,36,36,0,0,0,34,34,34,34,0,0,34,0,0,0,0,0,0,34,0,0,34,34,34,34,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,34,34,34,0,0,34,34,0,0,0,0,34,34,0,0,34,34,34,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,34,34,0,0,34,34,34,0,0,34,34,34,0,0,34,34,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,34,0,34,34,34,0,0,34,34,34,0,34,34,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,34,34,0,0,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,33,36,33,36,33,36,33,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,34,34,34,34,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,0,0,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,0,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,0,0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,0,34,0,0,0,34,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,0,34,34,0,34,0,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,0,34,34,34,34,34,34,34,34,34,0,34,0,34,34,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,0,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0}
                              }
                           };

__DATA(RAM2) const unsigned short int brightnessG[numImages][32][32] = {
                              {
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,15,8,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,9,9,15,15,8,15,15,15,9,9,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,9,9,9,9,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,9,17,9,17,17,17,17,9,17,17,9,1,1,1,1,1},
                                {1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,9,17,17,9,17,17,17,17,9,17,17,9,1,1,1,1},
                                {1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,17,9,17,17,17,9,17,17,17,17,9,17,17,9,1,1,1},
                                {1,1,9,17,17,9,17,17,0,17,9,17,17,17,17,17,9,17,17,17,17,9,17,0,17,17,9,17,17,9,1,1},
                                {1,9,17,17,17,9,17,17,0,0,17,17,17,17,17,17,9,17,17,17,17,17,0,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,0,0,17,17,17,17,9,17,17,17,0,0,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,29,0,17,17,17,17,9,17,17,17,0,29,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,0,0,29,29,0,0,17,17,17,9,17,17,0,0,29,29,0,0,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,0,0,0,0,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,0,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,17,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,17,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,1,9,17,17,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,9,17,9,1,1},
                                {1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1},
                                {1,1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1,1},
                                {1,1,1,1,9,17,17,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,17,17,9,1,1,1,1},
                                {1,1,1,1,1,9,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,17,17,9,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,17,17,9,17,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,17,17,17,9,17,9,9,17,17,17,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,33,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,33,33,33,33,0,33,0,0,0,0,0,0,0,0,33,0,33,33,33,33,0,0,36,36,36,36},
                                {36,36,36,0,0,0,33,33,33,33,0,0,33,0,0,0,0,0,0,33,0,0,33,33,33,33,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,33,33,33,0,0,33,33,0,0,0,0,33,33,0,0,33,33,33,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,33,33,0,0,33,33,33,0,0,33,33,33,0,0,33,33,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,33,0,33,33,33,0,0,33,33,33,0,33,33,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,19,19,19,19,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,0,0,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,0,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,0,0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,0,19,0,0,0,19,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,0,19,19,0,19,0,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,0,19,19,19,19,19,19,19,19,19,0,19,0,19,19,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,0,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0}
                              }
                           };

__DATA(RAM2) const unsigned short int brightnessB[numImages][32][32] = {
                              {
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,17,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,2,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,2,0,2,2,2,2,0,0,36,36,36,36},
                                {36,36,36,0,0,0,2,2,2,2,0,0,2,0,0,0,0,0,0,2,0,0,2,2,2,2,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,2,2,2,0,0,2,2,0,0,0,0,2,2,0,0,2,2,2,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,2,2,0,0,2,2,2,0,0,2,2,2,0,0,2,2,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,2,0,2,2,2,0,0,2,2,2,0,2,2,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
                              }
                           };

/*******************************************************************************
 * Code
 ******************************************************************************/

QUICKACCESS_SECTION_CODE(void matrix_draw(void));

void main(void) {
	BOARD_InitPins();
    matrix_draw();
}

void matrix_draw() {
	while(1) {
		currentRowBottom = currentRow + 16;

		// Send on/off bits for each LED (32 columns, R/G/B LED per column), and for top-half and bottom-half rows.
		for (unsigned short int i=0; i<32; i++) {
			// Upper rows.
			if (frame <= brightnessR[imgNum][currentRow][i]) {
				if (!r1_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinR1);
					r1_on = 1;
				}
			} else {
				if (r1_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinR1);
					r1_on = 0;
				}
			}

			if (frame <= brightnessG[imgNum][currentRow][i]) {
				if (!g1_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinG1);
					g1_on = 1;
				}
			} else {
				if (g1_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinG1);
					g1_on = 0;
				}
			}

			if (frame <= brightnessB[imgNum][currentRow][i]) {
				if (!b1_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinB1);
					b1_on = 1;
				}
			} else {
				if (b1_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinB1);
					b1_on = 0;
				}
			}

			// Lower rows.
			if (frame <= brightnessR[imgNum][currentRowBottom][i]) {
				if (!r2_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinR2);
					r2_on = 1;
				}
			} else {
				if (r2_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinR2);
					r2_on = 0;
				}
			}

			if (frame <= brightnessG[imgNum][currentRowBottom][i]) {
				if (!g2_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinG2);
					g2_on = 1;
				}
			} else {
				if (g2_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinG2);
					g2_on = 0;
				}
			}

			if (frame <= brightnessB[imgNum][currentRowBottom][i]) {
				if (!b2_on) {
					BOARD_USER_GPIO->DR |= (1UL << pinB2);
					b2_on = 1;
				}
			} else {
				if (b2_on) {
					BOARD_USER_GPIO->DR &= ~(1UL << pinB2);
					b2_on = 0;
				}
			}

			// Hit clock to indicate pixel values are set.
			BOARD_USER_GPIO->DR |= (1UL << pinClk);
			BOARD_USER_GPIO->DR &= ~(1UL << pinClk);
		}

		// Turn off LEDs before turning on current row.
		//BOARD_USER_GPIO->DR |= (1UL << pinOE);
		//BOARD_USER_GPIO->DR &= ~(1UL << pinOE);

		// Set current row.
		if (bitRead(currentRow, 0)) {
			BOARD_USER_GPIO->DR |= (1UL << selectA);
		} else {
			BOARD_USER_GPIO->DR &= ~(1UL << selectA);
		}

		if (bitRead(currentRow, 1)) {
			BOARD_USER_GPIO->DR |= (1UL << selectB);
		} else {
			BOARD_USER_GPIO->DR &= ~(1UL << selectB);
		}

		if (bitRead(currentRow, 2)) {
			BOARD_USER_GPIO->DR |= (1UL << selectC);
		} else {
			BOARD_USER_GPIO->DR &= ~(1UL << selectC);
		}

		if (bitRead(currentRow, 3)) {
			BOARD_USER_GPIO->DR |= (1UL << selectD);
		} else {
			BOARD_USER_GPIO->DR &= ~(1UL << selectD);
		}

		// All data is in.  Latch current row.
		BOARD_USER_GPIO->DR |= (1UL << latch);
		BOARD_USER_GPIO->DR &= ~(1UL << latch);

		// Move to next row.
		currentRow++;
		if (currentRow == 16) {
			currentRow = 0;

			frame++;
			if (frame > totalFrames) {
				frame = 1;
			}

			framesElapsed++;
		}

		// Control image change speed.
		if (framesElapsed >= changeImageFrames) {
			framesElapsed = 0;

			imgNum++;
			if (imgNum == numImages) {
				imgNum = 0;
			}
		}
	}
}
